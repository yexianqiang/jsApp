<template xmlns="http://www.w3.org/1999/html">
  <div class="solution-wrap">
    <div class="head"><img src="../assets/questionPackage/banner.png"></div>
    <div class="discription">
      <section>
        <p>有人说，青春期孩子们的世界里，同时生活着“天使”和“恶魔”追求完美又总有遗憾，拒绝灌输却渴望帮助。恰巧，青春期往往都是说来就来，完全不给孩子和家长准备时间。这时，如何陪孩子顺利度过青春期就成了每对父母必须要面对的头等难题。不过，别担心，治愈它的特效药在这！</p>
        <p>本期精品专栏涵盖青春期孩子的<strong>6大常见问题，共10个主题内容，50余节青春期精品课程合集</strong></p>
      </section>
    </div>
    <div class="experts">
      <h3 class="title">
        <span>青春期的那些“亲子对抗”，你经历过吗？</span>
      </h3>

      <ul class="items">
        <li>
          <div class="avatar">
            <img src="../assets/questionPackage/head1.png"/>
          </div>
          <div class="honor">
            <p class="course-title">主题一：不叛逆的青春(针对家长：视频课)</p>
            <ul class="course-items">
              <li>1.解读青春期大脑的秘密</li>
              <li>2.解读青春期的逆反心理</li>
              <li>3.引发叛逆的家庭类型</li>
              <li>4.关于叛逆行为的处理方法</li>
            </ul>
          </div>
        </li>
        <li>
          <div class="avatar">
            <img src="../assets/questionPackage/head2.png"/>
          </div>
          <div class="honor">
            <p class="course-title">主题二：与青春的孩子交朋友(针对家长：视频课)</p>
            <ul class="course-items">
              <li>1.青春期到底发生了什么</li>
              <li>2.进入青春期，重新认识孩子</li>
              <li>3.叛逆、爱玩、懒散……孩子到底怎么了？</li>
              <li>4.平稳度过青春期，家长可以怎么做</li>
            </ul>
          </div>
        </li>
        <li>
          <div class="avatar">
            <img src="../assets/questionPackage/head3.png"/>
          </div>
          <div class="honor">
            <p class="course-title">主题三：是升学也是转学(针对孩子：音频课)</p>
            <ul class="course-items">
              <li>1.再见，我的小学同学</li>
              <li>2.你好，我的初中新同学</li>
              <li>3.天！初中的学习怎么是这样的？(上)</li>
              <li>4.天！初中的学习怎么是这样的？(下)</li>
              <li>5.最喜欢老师VS最讨厌老师</li>
              <li>6.被补习班打乱的作息时间</li>
              <li>7.教你如何说服“不懂事”的爸妈</li>
            </ul>
          </div>
        </li>

      </ul>

    </div>
    <div class="experts experts-2">
      <h3 class="title">
        <span>青春期异性交往的四大忠告</span>
      </h3>
      <ul class="items">
        <li>
          <div class="avatar">
            <img src="../assets/questionPackage/head4.png"/>
          </div>
          <div class="honor">
            <p class="course-title">主题一：如何处理异性关系(针对家长：视频课)</p>
            <ul class="course-items">
              <li>1.青春期异性关系的特点</li>
              <li>2.家庭因素对孩子异性关系的影响</li>
              <li>3.青春期孩子不会和异性相处怎么办</li>
              <li>4.孩子恋爱了怎么办</li>
            </ul>
          </div>
        </li>
        <li>
          <div class="avatar">
            <img src="../assets/questionPackage/head5.png"/>
          </div>
          <div class="honor">
            <p class="course-title">主题二：熊孩子被带坏？近墨者亦可赤！（针对家长：音频课）</p>
            <ul class="course-items">
              <li>1.一直很爱爸妈！却不知为什么对他们变得“守口如瓶”了？</li>
              <li>2.青春初期，我为什么如此渴望小伙伴的陪伴与认同？</li>
              <li>3.爸妈总担心我被小伙伴带坏？我一万个不服！</li>
              <li>4.我为什么会选择和“坏”孩子玩？</li>
              <li>5.和TA们一起，为什么我做了很多我本不喜欢的事儿？</li>
              <li>6.和TA一起，我学会了抽烟、沉迷上了游戏！</li>
              <li>7.趁爸妈不在，在家开朋友圈的Party，被一万个吐槽嫌弃？</li>
              <li>8.莫名其妙就开撕？闺蜜是怎么了？</li>
              <li>9.兄弟之间，没有什么问题是一把王者开黑不能解决的。</li>
              <li>10.班级团体、集体活动，为什么你总是被孤立？</li>
              <li>11.异性朋友到底该如何相处？</li>
              <li>12.同样学渣的同桌竟然变成了学霸！</li>
            </ul>
          </div>
        </li>
      </ul>

      <h3 class="title title-2">
        <span>青春期的孩子的“性欲望”</span>
      </h3>
      <ul class="items-2">
        <li>
          <div class="items-2-avatar avatar"><img src="../assets/questionPackage/head6.png" alt=""></div>
          <div class="items-2-item">
            <p class="course-title">主题一：家长必知的性教育（针对家长：视频课）</p>
            <ul class="items-2-item-title">
              <li>1.性教育比你预想的更重要</li>
              <li>2.如何应对孩子的手淫自慰</li>
              <li>3.男孩、女孩性教育的差异</li>
              <li>4.家长如何避免孩子遭受性创伤</li>
            </ul>
          </div>
        </li>
        <li>
          <div class="items-2-avatar avatar"><img src="../assets/questionPackage/head7.png" alt=""></div>
          <div class="items-2-item">
            <p class="course-title">主题二：被爱冲昏头，中学生的恋爱指北（针对学生：音频课）</p>
            <ul class="items-2-item-title">
              <li>1.当爱冲昏头，我为什么想谈恋爱</li>
              <li>2.在恋爱这件事上，女生就是比男生更投入</li>
              <li>3.恋爱中的冲突</li>
              <li>4.火星人：男生的洞穴机制</li>
              <li>5.金星人：女生的语言机制</li>
              <li>6.爱是一种能力</li>
              <li>7.为何爱会伤人</li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
    <div class="experts-3">
      <h3 class="title">两招让青春期孩子爱上学习<br/> ——对症下药才能事半功倍</h3>
      <ul class="items">
        <li>
          <div class="avatar">
            <img src="../assets/questionPackage/head8.png"/>
          </div>
          <div class="honor">
            <p class="course-title">主题一：寻找合适的学习方法（针对家长：视频课）</p>
            <ul class="course-items">
              <li>1.破解孩子的学习依赖症</li>
              <li>2.学习太单调？一招改变它</li>
              <li>3.电子产品只会干扰孩子学习？NO！</li>
              <li>4.面对孩子考试成绩下降，有比说教更好的方法</li>
            </ul>
          </div>
        </li>
      </ul>
      <div class="course-10">
        <p class="title">青春期的我，又丑又胖还单身</p>
        <p class="title2"> 主题一：我是“中国瘦人”（针对学生：音频课）</p>
        <ul class="course-10-item">
          <li>1.我不是“天生瘦”——一个胖子的自白</li>
          <li>2.瘦与胖的一念之差</li>
          <li>3.“发育胖”不可怕，“情绪胖”才要命</li>
          <li>4.我承认瘦人很美，但我觉得自然更美</li>
        </ul>
      </div>
      <div class="course-11">
        <p class="title">5招帮你摆脱网络游戏依赖症</p>
        <p class="title2"> 主题一：合理游戏养成法（针对家长：音频课）</p>
        <ul class="course-10-item">
          <li>1.游戏是什么鬼？</li>
          <li>2.孩子玩游戏，你为何焦虑？</li>
          <li>3.游戏迷思，我们怎么做？</li>
          <li>4.玩都玩了，学点什么再走吧</li>
          <li>5.最好的教育是游戏式的</li>
        </ul>
      </div>

    </div>
    <div class="comment-pic"></div>

    <div class="notice">
      <div class="container">
        <p class="tip">订阅须知：</p>
        <ul class="list">
          <li class="item">1.	本内容为独家付费课程，内容一经订阅，永久有效，随时收听。</li>
          <li class="item">2.	本课程支持在知子花教育app，以及知子花家庭教育公众号内知子学院中购买、收听。</li>
          <li class="item">3.	虚拟产品一经购买成功不可退款、转让，最终解释权归知子花所有。</li>
          <li class="item">4.	在订阅过程中，有任何问题，可添加客服知子花小帮手（微信号：youshitongkefu），进行详细咨询</li>
        </ul>
        <div class="erweima"><img src="../assets/questionPackage/erweima.png" alt=""></div>
      </div>
    </div>

    <!--<div class="solutions">-->
      <!--<template v-for="pkg in packages">-->
        <!--<div class="item">-->
          <!--<h2 class="title">{{ pkg.name }}</h2>-->
          <!--<div class="desc" v-html="pkg.txt"></div>-->
          <!--<div class="price">-->
            <!--<span class="label">价格:</span> ¥{{ pkg.price }}-->
          <!--</div>-->
          <!--<div class="button">-->
            <!--<a href="javascript:;" @click="selectPackage(pkg)">戳我购买</a>-->
          <!--</div>-->
        <!--</div>-->
      <!--</template>-->
    <!--</div>-->
    <!--<div class="order-info">-->
      <!--<div class="field packages">-->
        <!--<template v-for="pkg in packages">-->
          <!--<div :class="{checked: selectedPackage.id == pkg.id}" @click="selectPackage(pkg)">{{ pkg.name }}</div>-->
        <!--</template>-->
      <!--</div>-->
      <!--<div class="field">手机号: <input type="number" maxlength="11" v-model="mobile" placeholder="输入手机号以便我们和您联系"></div>-->
      <!--<div class="button">-->
        <!--<a href="javascript:;" @click="submitForm">确定购买</a>-->
      <!--</div>-->
    <!--</div>-->
    <!--footer-->
    <div class="pay-footer" @click="showPay()">
      <p class="price"><span style="font-size: 0.4rem">限时69元</span>&nbsp;<span style="font-size: 0.3rem">立即购买</span></p>
    </div>
  </div>
</template>


<style lang="scss">
  .solution-wrap {
    background: #fff;padding-bottom: 0.2rem;

    .head{
      width: 100%; overflow: hidden; min-height: 2.12rem;

      img { display: block; width: 100% }
    }

    .discription{
      padding: 0 .45rem; margin-top: -0.9rem; position: relative;

      &>section { border-radius: .1rem; font-size: .28rem; padding: .4rem; line-height: .46rem; background: white; color: #616161; margin-bottom: .2rem;
        text-align: justify; box-shadow: 0 0.05rem 0.08rem rgba(0, 0, 0, 0.1);}
      &>section>p { margin-bottom: .35rem;  }
    }
    .avatar{
      width: 3.84rem; height: 2.15rem;margin: 0 auto;border-radius: 0.08rem;overflow: hidden;
      img { display: inline-block; width: 100%; }
    }
    .experts {
       width: 100%; height: 20.65rem; margin-top: -0.2rem; background: url("../assets/questionPackage/pic1.png") no-repeat center;background-size: 100% ;padding-top: 1.33rem; color: white;

      .title{ font-size: .32rem; text-align: center;}
      .title>span { display: inline-block;  line-height: .6rem; position: relative; }
      .items{
        padding-top: .35rem;padding-left: 0.75rem;padding-right: 0.35rem;

        &>li{ overflow: hidden; margin-bottom: .65rem;}


        .honor{
          font-size: .24rem; line-height: .3rem; padding: 0 0.5rem 0 .1rem;color: #fff;
          .course-title{
            font-size: 0.26rem;line-height: 0.4rem;font-weight: bold;margin-top: 0.3rem;
          }
          .course-items{
            line-height: 0.45rem;
          }
        }
      }
    }
    .experts-2{
      height:30.82rem;background: url("../assets/questionPackage/pic2.png") no-repeat center;background-size: 100%;padding-top: 0;
      .title{ color: #6c7cff; }
      .title-2{
        color: #fff;margin-top: 1.5rem;margin-bottom: 0.5rem;
      }
      .items {
        &>li{
          .honor{
            color: #6c7cff;
          }
        }
      }

      .items-2{
        width: 100%;
        &>li{
          width: 100%;margin-bottom: 0.5rem;
          .items-2-avatar{
            margin: 0 auto;border-radius: 0.08rem;overflow: hidden;
            img { display: inline-block; width: 100%; }position: relative;z-index: 5;
          }
          .items-2-item{
            width: 6.4rem; padding: 0.3rem 0.3rem 0.4rem;background: linear-gradient(to bottom,#738eff,#7aa9fd);border-radius: 0.08rem;margin: -0.2rem auto 0;
            .course-title{
              font-size: 0.26rem;line-height: 0.4rem;font-weight: bold;margin-top: 0.3rem;
            }
            .course-items{
              line-height: 0.45rem;
            }
            .items-2-item-title{
              font-size: 0.24rem;color: #fff;line-height: 0.45rem;
            }
          }
        }

      }
    }
    .experts-3{
      width: 100%;height: 20.3rem;background: url("../assets/questionPackage/pic3.png") no-repeat center;background-size: 100%;margin-top: 0.8rem;
      .title{
        font-size: 0.34rem;color: #6c7cff;text-align: center;line-height: 0.45rem;margin-bottom: 0.3rem;
      }
      .items{
        &>li{
          padding: 0 0.3rem 0.4rem 0.75rem;
        }
      }
      .honor{
        font-size: .24rem; line-height: .3rem; padding: 0 0.5rem 0 .1rem;color: #6c7cff;
        .course-title{
          font-size: 0.26rem;line-height: 0.4rem;font-weight: bold;margin-top: 0.3rem;
        }
        .course-items{
          line-height: 0.45rem;
        }
      }
      .course-10{
        width: 6.8rem;height: 4.44rem;margin: 0.9rem auto 0;border-radius: 0.08rem;padding: 0.4rem 0.45rem 0 0.4rem;color: #fff;
        .title{
          font-size: 0.3rem;margin-bottom: 0.5rem;color: #fff;text-align: left;font-weight: bold;
        }
        .title2{
          font-size: 0.26rem;line-height: 0.4rem;
        }
        .course-10-item{
          &>li{
            font-size: 0.24rem;line-height: 0.45rem;
          }
        }
      }
    }
    .course-11{
      @extend .course-10;
      margin-top: 2rem !important;
    }
    .comment-pic{
      width: 100%;height: 16.41rem;background: url("../assets/questionPackage/comment-pic.png") no-repeat center;background-size: 100%;margin-bottom: 0.2rem;
    }
    .notice{
      overflow: hidden; padding: .3rem .3rem 1rem; font-size: .28rem; color: #6c6c6c;

      .container{
        padding: .25rem; border: .01rem solid #b2b2b2;

        .tip { color: #5d5d5d; line-height: .5rem; margin-bottom: .2rem; font-weight: bold;}
        .item { line-height: .4rem;  }
        .erweima{
          width: 1.64rem;height: 1.64rem;margin: 0.5rem auto 0;
          img{width: 100%;display: block}
        }
      }
    }

    .solutions {
      font-size: .20rem;

      .item {
        background: #FFF5E8; padding: .9rem .4rem; position: relative; margin-bottom: 1.2rem; min-width: .4rem;

        .title {
          font-size: .32rem; line-height: 1.1rem; padding: 0 1.1rem; margin-bottom: -0.55rem; border: .01rem solid #6c6c6c;
          color: #6c6c6c; background: white; position: absolute; left: 50%; top: 0; display: inline-block; word-break: normal;
          white-space: nowrap; transform: translate(-50%, -50%);
        }

        .desc{
          margin-bottom: .5rem;

          h3{ font-weight: 500; font-size: .35rem; margin-top: .5rem; }
          p{ font-size: .3rem; color: #6c6c6c; line-height: .4rem; }
          p.indent{ text-indent: .6rem; }

          table{ width: 100%; padding: 0; margin-top: .5rem !important; }
          table, tr, td { padding: 0; margin: 0; border-style: solid; border-color: #6c6c6c; border-width: 1px; border-collapse:collapse;border-spacing:0; }
          td{ height: .3rem; text-align: center; padding: .1rem 0; vertical-align: middle; }
        }

        .price{
          font-size: .35rem; color: #fa7736; text-align: right; padding: .3rem; margin-bottom: .5rem;

          .label{ font-size: .28rem; color: #6c6c6c; }
        }

        .button{
          display: flex; justify-content: center;
          a{ color: white; background: #fa7736; display: block;line-height: .65rem; width: 2.25rem; font-size: .32rem; text-align: center; border-radius: .06rem; }
        }
      }
    }

    .order-info{
      font-size: .25rem; height: 6rem; padding-top: .5rem;

      .field{
        padding-left: .8rem;
      }

      .packages{
        &>div{ line-height: .38rem; margin: .15rem 0; padding-left: .7rem; }
        &>div:before{ position: absolute; margin-left: -0.55rem; display: block; content: ""; height: .38rem; width: .45rem;  float: left; }
        &>div.checked:before{ background-position: 0 0; }
      }

      .field{
        margin-bottom: .5rem;

        input{ line-height: .8rem; padding: 0 .2rem; color: #C4C4C4; display: inline-block; height: .8rem; border-radius: .1rem; outline: 0; border: 1px solid #C4C4C4; width: 4.7rem; }
      }

      .button{
        display: flex; justify-content: center;
        a{ color: white; background: #fa7736; display: block;line-height: .65rem; width: 2.25rem; font-size: .32rem; text-align: center; border-radius: .06rem; }
      }
    }

    .pay-footer{
      width: 100%;height: 1rem;position: fixed;bottom: 0;left: 0; background: linear-gradient(to right, #e765e2,#f05ba5);z-index: 10;
      .price{
        font-size: 0.28rem;color: #fff;text-indent: 3rem;line-height: 1rem;position: relative;
        &:before{
          content: '原价299元';position: absolute;left: -1.5rem;top:50%;transform: translateY(-50%);text-decoration: line-through;font-size: 0.24rem;
        }
      }
    }

  }
</style>

<script>
  export default {
    name: "solution",
    data() {
      return {
        packages: [],
        selectedPackage: {id: 0},
        mobile: '',
        wecahtPayConfig: null,
        weCreating: false,
        package_id:null,
      }
    },
    mounted(){
      document.title = '让“青春期” = “跳板期”';
//      this.getData();
       this.package_id = this.$route.params.id;

    },
    methods: {
      getData() {
        let vthis = this;
        this.$http.post(zzhJs.config.apiDomain + '/zzhedu/wx/package/detail.action', {
          package_id: this.$route.params.id
        })
          .then(res => {
            let resData = res.body.data;

            vthis.packages = resData.child_package;
          }).catch(function (e) {
          console.info(e);
        })
      },
      selectPackage(pkg) {
        if (!zzhJs.env.isLogined()) {
          return zzhJs.env.callLogin();
        }
        this.selectedPackage = pkg;

//        $('html,body').animate({'scrollTop':$('html')[0].scrollHeight},500);
        $('html,body').scrollTop($('html')[0].scrollHeight);
      },
      submitForm() {
        if (this.weCreating) {
          return;
        }

        if (!this.selectedPackage.id) {
          return this.weNotify('请选择解决方案！');
        }

        if (!/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.mobile)) {
          return this.weNotify('请输入您的手机号码！');
        }

        if (zzhJs.env.isInApp()) {
          return zzhJs.env.callPackagePayment({
            title: this.selectedPackage.name,
            package_id: this.selectedPackage.id,
            price: this.selectedPackage.price,
            mobile: this.mobile
          });
        }

        // 签名预创建微信订单
        let vthis = this,
          ApiUrl = zzhJs.config.apiDomain + '/zzhedu/wx/order/create_package.action';

        this.weLoadStart();
        this.weCreating = true;

        this.$http.post(ApiUrl, {
          title: document.title,
          attach: zzhJs.env.environment,
          tel: this.mobile,
          package_id: this.selectedPackage.id,
          type: 3,
          price: this.selectedPackage.price,
        }).then(res => {
          this.weCreating = false;
          vthis.weLoadEnd();
          var response = res.body;

          if (response.status == 503 || response.status == 504) {
            this.$router.replace('/');
            return vthis.weNotify(response.message);
          }

          if (response.status != 200) {
            return vthis.weNotify(response.message);
          }

          vthis.wecahtPayConfig = response.data;
          vthis.callWechat();

        }, res => {
          vthis.weCreating = false;
          vthis.weLoadEnd();
          vthis.weNotify('服务器繁忙请稍后!');
        });
      },

      callWechat() {
        let vthis = this,
          config = this.wecahtPayConfig;

        // 调起支付
        wx.chooseWXPay({
          timestamp: config['timestamp'],
          nonceStr: config['nonce_str'],
          package: config['package'],
          signType: config['sign_type'],
          paySign: config['pay_sign'],
          success: function (res) {
            vthis.calling = false;
            vthis.loading = false;

            if (res.errMsg != "chooseWXPay:ok") {
              vthis.needRetry = true;
              return vthis.weNotify('支付失败,请重试!'+ res.errMsg);
            }

            // 支付完成，跳转到我的已购。
            window.location = zzhJs.config.urlMine + '?#/mine/order';
          },
          cancel: function (res) {
            vthis.calling = false;
            vthis.needRetry = true;
            vthis.loading = false;
          },
          fail: function (res) {
            vthis.calling = false;
            vthis.needRetry = true;
            vthis.loading = false;

            return vthis.weNotify('支付失败,请重试!');
          }
        });
      },


      // 支付问题
      showPay() {

        if (!zzhJs.env.isLogined()) {
          return zzhJs.env.callLogin();
        }

        if (zzhJs.env.isInApp()) {
          return zzhJs.env.callPackagePayment({
            title: document.title,
            package_id: this.package_id,
            price: 69,
            mobile: ''
          });
        }

        // 签名预创建微信订单
        let vthis = this,
          ApiUrl = zzhJs.config.apiDomain + '/zzhedu/wx/order/create_package.action';

        this.weLoadStart();
        this.weCreating = true;

        this.$http.post(ApiUrl, {
          title: document.title,
          attach: zzhJs.env.environment,
          tel: '',
          package_id: this.package_id,
          type: 3,
          price:69,
//          price: this.selectedPackage.price,
//          tel: this.mobile,
//          package_id: this.selectedPackage.id,
        }).then(res => {
          this.weCreating = false;
          vthis.weLoadEnd();
          var response = res.body;

          if (response.status == 503 || response.status == 504) {
            this.$router.replace('/');
            return vthis.weNotify(response.message);
          }

          if (response.status != 200) {
            return vthis.weNotify(response.message);
          }

          vthis.wecahtPayConfig = response.data;
          vthis.callWechat();

        }, res => {
          vthis.weCreating = false;
          vthis.weLoadEnd();
          vthis.weNotify('服务器繁忙请稍后!');
        });
      }
    },
  }
</script>

